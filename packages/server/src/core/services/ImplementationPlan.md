# 核心服务 (Core Services)

## 功能概述

本模块包含系统的核心业务逻辑服务，负责处理复杂的业务流程、跨模型交互以及与外部系统的集成。服务层作为应用的中心层，协调各模型和外部资源，实现系统的主要功能。

## 技术架构

-   基于 TypeScript 类实现业务服务
-   采用依赖注入模式管理服务间依赖
-   使用异步方法处理 I/O 操作
-   实现事务管理和错误处理

## 依赖关系

-   `core/models`：使用核心业务模型
-   `core/types`：使用共享类型定义
-   `utils/*`：使用各种工具函数
-   可能用到的第三方库：
    -   `axios`：HTTP 请求
    -   `fs-extra`：文件操作
    -   `lodash-es`：工具函数
    -   `execa`：执行命令行

## 实现计划

1. 定义服务接口和抽象基类
2. 实现核心业务服务
3. 处理服务间的依赖关系
4. 实现错误处理和日志记录
5. 添加单元测试和集成测试

## 注意事项

-   保持服务的职责单一，避免过度复杂的服务类
-   处理好异步操作，正确使用 Promise 和 async/await
-   实现完善的错误处理，避免未捕获的异常
-   避免服务间的循环依赖
-   业务逻辑应集中在服务层，而非分散在控制器或模型中

## API 设计

每个服务应遵循以下设计原则：

-   构造函数接收依赖服务或配置
-   公开方法应有明确的输入输出类型
-   复杂业务流程应拆分为多个私有方法
-   服务方法应返回 Promise 以支持异步操作
-   HTTP 请求应封装在独立方法中
-   提供清晰的错误处理机制
