# Vue 服务管理

用于管理 Vue 项目的构建、部署和本地服务器启动。支持项目历史记录管理、分支切换构建等功能。

## 功能特性

-   项目构建与打包
-   本地静态文件服务器启动
-   项目历史记录管理
-   分支切换与自动构建
-   多项目支持
-   智能端口检测

## 使用方法

```bash
$ mycli vue [options]
```

### 基础示例

```bash
# 选择项目并构建启动
$ mycli vue

# 只启动服务，不构建
$ mycli vue --server

# 使用当前目录项目
$ mycli vue --current

# 从历史记录中选择项目
$ mycli vue --list

# 切换分支并构建启动
$ mycli vue --checkout

# 指定构建命令
$ mycli vue --command=build

# 指定端口号
$ mycli vue --port=8080
```

## 选项说明

### command

指定构建命令，默认为 `build`。

类型：`string`

默认值：`build`

### list

显示已操作过的项目列表，从列表中选择项目。

类型：`boolean`

默认值：`false`

### server

是否只开启服务，不进行项目构建。

类型：`boolean`

默认值：`false`

### checkout

是否切换分支，打包并启动服务器。

类型：`boolean`

默认值：`false`

### current

是否使用当前目录作为项目路径。

类型：`boolean`

默认值：`false`

### port

指定服务器端口号。

类型：`number`

默认值：`7001`

### publicPath

指定静态资源的公共路径。

类型：`string`

默认值：`""`

## 工作流程

1.  **项目选择**: 支持多种方式选择项目
    -   图形化对话框选择项目目录
    -   从历史记录中选择
    -   使用当前目录

2.  **分支管理**: 自动获取当前分支信息
    -   显示项目当前分支
    -   支持分支切换构建

3.  **项目构建**: 执行 npm 构建命令
    -   支持自定义构建命令
    -   实时显示构建进度

4.  **服务器启动**: 启动 Express 静态服务器
    -   自动检测可用端口
    -   自动复制访问地址到剪贴板

5.  **历史记录**: 自动保存项目信息
    -   记录项目路径、命令、端口等配置
    -   支持快速重新选择历史项目

## 配置说明

### 数据库记录

项目信息自动保存到 SQLite 数据库，包含：

-   项目路径
-   构建命令
-   公共路径
-   默认端口
-   项目名称

### Vue 配置文件

自动读取 `vue.config.js` 中的 `publicPath` 配置：

```javascript
module.exports = {
    publicPath: '/my-app/',
};
```

## 注意事项

-   需要 Node.js 14 及以上版本
-   项目必须包含 `dist` 目录才能启动静态服务
-   构建命令需要在项目的 `package.json` 中定义
-   服务器启动后会自动复制访问地址到系统剪贴板
-   支持智能端口检测，避免端口冲突
-   历史记录功能需要数据库支持